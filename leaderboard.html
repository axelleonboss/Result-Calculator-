<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Top 20 Student Leaderboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    * { box-sizing:border-box; font-family: Arial, sans-serif; }
    body { margin:0; background:#000814; color:#f0c808; }

    header {
      background:#001f3f;
      padding:12px 15px;
      text-align:center;
    }

    main {
      padding:15px;
      max-width:900px;
      margin:auto;
    }

    .card {
      background:#111;
      padding:15px;
      border-radius:10px;
      margin-bottom:20px;
      box-shadow:0 0 12px #f0c80844;
    }

    h2 { text-align:center; margin-top:0; }

    table {
      width:100%;
      border-collapse:collapse;
      margin-top:10px;
      font-size:14px;
    }

    th, td {
      border:1px solid #f0c808;
      padding:8px;
      text-align:center;
    }

    th { background:#001f3f; }

    .rank1 { background:#ffd70055; }
    .rank2 { background:#c0c0c055; }
    .rank3 { background:#cd7f3255; }

    @media(max-width:600px){
      table { font-size:12px; }
    }
  </style>
</head>
<body>

<header>
  <h1 style="margin:0;font-size:1.2em;">üèÜ Student Leaderboard</h1>
</header>

<main>

  <section class="card">
    <h2>Top 20 Students</h2>

    <table>
      <thead>
        <tr>
          <th>Pos</th>
          <th>Name</th>
          <th>Average</th>
        </tr>
      </thead>
      <tbody id="leaderboardBody"></tbody>
    </table>
  </section>

</main>

<script>
// Load leaderboard from localStorage if exists
let leaderboard = JSON.parse(localStorage.getItem("leaderboard")) || [];

// Render leaderboard
function renderLeaderboard() {
  const table = document.getElementById("leaderboardBody");
  table.innerHTML = "";

  if (leaderboard.length === 0) {
    table.innerHTML = `<tr><td colspan="3">No students yet</td></tr>`;
    return;
  }

  leaderboard.forEach((student, index) => {
    const row = document.createElement("tr");

    // Highlight top 3
    if(index === 0) row.classList.add("rank1");
    if(index === 1) row.classList.add("rank2");
    if(index === 2) row.classList.add("rank3");

    row.innerHTML = `
      <td>${index + 1}</td>
      <td>${student.name}</td>
      <td>${student.score.toFixed(2)}</td>
    `;
    table.appendChild(row);
  });
}

// Add student to leaderboard dynamically
function addToLeaderboard(name, avg) {
  if(!name) return; // skip empty names
  leaderboard.push({ name, score: avg });

  // Sort highest to lowest
  leaderboard.sort((a,b) => b.score - a.score);

  // Keep top 20
  leaderboard = leaderboard.slice(0, 20);

  // Save to localStorage
  localStorage.setItem("leaderboard", JSON.stringify(leaderboard));

  renderLeaderboard();
}

// Initial render
renderLeaderboard();
</script>

</body>
</html>
